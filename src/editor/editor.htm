<html>
<head>
<title>BeardAch configuration editor</title>
<script src="jquery-1.8.2.min.js"></script>
<style>
.achievement{
border: 1px solid black;
}
.trigger:nth-child(even){
background-color: #EEEEEE;
}
.trigger:nth-child(odd){
background-color: #DEDEDE;
}
</style>
<script>
var triggerMaker = {};
triggerMaker.wgregion = function(trigger){
  world = $("#world",trigger).val();
  region = $("#region",trigger).val();
  alert("wgregion|" + world + ":" + region);
};

triggerMaker.ach = function(trigger){
  ach = $("#ach",trigger).val();
  alert("ach|" + ach);
}

triggerMaker.bankbalance = function(trigger){
  ach = $("#amount",trigger).val();
  alert("bankbalance|" + ach);
}

</script>
<script>
 $(document).ready(function(){
   $("#foo").click(function(){
     $(".hidden > .achievement").clone(true).appendTo("#achList");
   });
   $(".hidden > .achievement > #remove").click(function(){$(this).parent().remove();});
   $(".hidden > .achievement > .helpText").click(function(){alert($(this).attr("text"))});
   $(".hidden > .achievement > .newAch").click(function(){
     var triggerType = $(this).parent().children(".triggerType").val();
     $(".hidden > .trigger-" + triggerType).clone(true).appendTo($(this).parent().children(".triggerList")[0]);
     alert(triggerType);
   });
   $(".hidden > .achievement > #save").click(function(){
   
     $(".triggerList > .trigger",$(this).parent()).each(function(i,e){
       triggerMaker[$("#type",e).val()]($("#type",e).parent());
     });
   
   });
   
   $(".hidden > .trigger > #remove").click(function(){$(this).parent().remove();});
   
 });
 </script>
</head>
<body>
<div class="hidden" style="display:none">
  <div class="achievement">
  <button id="remove">Remove</button><br/>
  slug: <input id="slug" type="text" /><a class="helpText" text="The unique id of an achievement">?</a><br />
  
  name: <input id="name" type="text" /><a class="helpText" text="The name of the achievement that players will see">?</a><br />
  
  description: <input id="description" type="text" /><a class="helpText" text="Description of the achievement">?</a><br />
  
  alias: <input id="alias" type="text" /><a class="helpText" text="Alias, used if an achievement has two ways to complete it, triggering this achievement will instead unlock the other achievement instead.">?</a><br />
  
  Broadcast: <select id="broacast">
  <option value="">default</option>
  <option value="none">NONE</option>
  <option value="person">person only</option>
  <option value="broadcast">Broadcast</option>
  </select><a class="helpText" text="Defines the action for the unlock message. Default follows the config value.">?</a><br/>
  
  <h3>Triggers:</h3>
  <select class="triggerType">
  <option value="ach">Has Achievement</option>
  <option value="noach">Does Not Have Achievement</option>
  <option value="wgregion">Inside WorldGuard Region</option>
  <option value="bankbalance">Has Money</option>
  </select>
  <button class="newAch">Add Trigger</button><br />
  <button id="save">Save</button>
  
  <div class="triggerList"></div>
  
  <h3>Rewards:</h3>
  <div class="triggerList"></div>
  </div>

  <div class="trigger-ach trigger">
  <input type="hidden" id="type" value="ach" />
  <h3>Has Achievement</h3><button id="remove">Remove</button><br/>
  Achievement slug:<input id ="ach" type="text" />
  </div>
  
  <div class="trigger-noach trigger">
  <input type="hidden" id="type" value="noach" />
  <h3>Does Not Have Achievement</h3><button id="remove">Remove</button><br/>
  Achievement slug:<input id ="ach" type="text" />
  </div>
  
  <div class="trigger-wgregion trigger">
  <input type="hidden" id="type" value="wgregion" />
  <h3>Inside WorldGuard Region</h3><button id="remove">Remove</button><br/>
  World name:<input id ="world" type="text" /><br/>
  Region name:<input id ="region" type="text" />
  </div>
  
  <div class="trigger-bankbalance trigger">
  <input type="hidden" id="type" value="bankbalance" />
  <h3>Has Money</h3><button id="remove">Remove</button><br/>
  Amount:<input id ="amount" type="text" />
  </div>
  
</div>
<h1>Achievements</h1>
<button id="foo">Add new achievement</button>
<div id="achList"></div>
</body>
</html>